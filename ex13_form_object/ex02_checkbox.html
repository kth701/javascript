<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>체크박스</title>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH" crossorigin="anonymous">
</head>
<body>
  <div class="container">
    <div class="check_box">
      <label>
        <input type="checkbox" id="chA" class="c" value="바나나" checked >바나나
      </label>
      <label>
        <input type="checkbox" id="chB" class="c" value="딸기" checked>딸기
      </label>
      <label>
        <input type="checkbox" id="chC" class="c" value="포도">포도
      </label>
      <hr>
      <div class="alert alert-warning result" role="alert">
        A simple warning alert—check it out!
      </div>
    </div>

  </div>

  <script>
    const checkBoxA = document.querySelector('#chA')
    //console.log(checkBoxA, checkBoxA.checked)

    const checkBoxB = document.querySelector('#chB')
    const checkBoxC = document.querySelector('#chC')
    //console.log(checkBoxB.checked, checkBoxC.checked)

    // 체크상태에 따라 처리하기
    if (checkBoxA.checked){ // 체크상태이면 true
      console.log('A checked =>', checkBoxA.value)
    } else {// 체크상태이면 false
      console.log('A =>', checkBoxA.value)
    }


    // checkBox 이벤트 -> change
    /*
    checkBoxA.addEventListener('change',(e) => {
      console.log("A change=>",e.target.checked)
      if (e.target.checked == true){
        console.log("체크된 값은: "+e.target.value)
      }
    })
    */


    // 체크상태를 true로 변경
    //checkBoxA.checked = true
    var arrayChk = document.querySelectorAll('.c')
    const result = document.querySelector('.result')

    checkBoxAll() // 함수실행(호출)

    // 체크박스가 변경될 때 처리하는 이벤트 => 'change'
    arrayChk.forEach( (chk) => {
      chk.addEventListener('change', (e)=>{
        //console.log('change', chk.id)
        checkBoxAll()
      })
    })
    
  
    function checkBoxAll(){
      console.log("-- 체크상태 확인 시작")
      console.log(arrayChk)

      let check_str = ""

      arrayChk.forEach( (chk) => {  //console.log(chk.value, chk.checked)
        if (chk.checked){           //console.log(chk.value, chk.checked)
          check_str += chk.value +","  
        } 
      }) // end forEach()
      //console.log("당신이 선택한 항목은: "+check_str)

      // 마지막 꼼마(,) 제거하기
      //console.log(check_str.lastIndexOf(','))
      // substr(start, index) => 0부터 index-1까지 추출
      check_str =  check_str.substr(0, check_str.lastIndexOf(',') )

      result.innerHTML = check_str
      console.log("-- 체크상태 확인 끝") 
    }// checkBoxAll()


    



  </script>
</body>
</html>